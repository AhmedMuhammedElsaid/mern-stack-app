"use strict";var express=require("express"),morgan=require("morgan"),bodyParser=require("body-parser"),cors=require("cors"),DB=require("./model/connection"),Product=require("./model/Product.js"),Department=require("./model/Department"),Promotion=require("./model/Promotion"),path=require("path"),app=express();app.use(morgan("dev")),app.use(cors()),app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json());var PORT=process.env.PORT||4e3;app.get("/api/",function(e,r){var n,t,o,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Product.find());case 3:return n=e.sent,e.next=6,regeneratorRuntime.awrap(Department.find());case 6:return t=e.sent,e.next=9,regeneratorRuntime.awrap(Promotion.find());case 9:o=e.sent,s={products:n,promotions:o,department:t},r.json(s),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r.json({message:e.t0});case 17:case"end":return e.stop()}},null,null,[[0,14]])}),"production"===process.env.NODE_ENV&&(app.use(express.static("client/build")),app.get("*",function(e,r){r.sendFile(path.join(__dirname,"client","build","index.html"))})),app.listen(PORT,function(){console.log("Server is running on  port ".concat(PORT," ")),DB()});